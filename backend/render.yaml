services:
  - type: web
    name: xray-evaluator-backend
    runtime: python
    plan: free  # or 'starter', 'standard', etc.
    rootDir: backend
    buildCommand: pip install --upgrade pip && pip install -r requirements.txt
    startCommand: uvicorn app.main:app --host 0.0.0.0 --port $PORT
    envVars:
      - key: PYTHON_VERSION
        value: 3.11.0
      - key: XRAY_CORS_ORIGINS
        value: '["https://your-frontend-domain.com","https://www.your-frontend-domain.com"]'
        # Update this with your actual frontend URL after deployment
      - key: XRAY_MODEL_DIR
        value: /opt/render/project/src/backend/models
        # Note: You'll need to handle model file storage separately (see README)
      - key: XRAY_CONFIDENCE_LOW_THRESHOLD
        value: 0.60
    
    # Uncomment if you want to use Render Disk for model storage (paid feature)
    # disk:
    #   name: model-storage
    #   mountPath: /opt/render/project/src/backend/models
    #   sizeGB: 1
    
    healthCheckPath: /healthz
